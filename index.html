<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>My Valentine</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <style>
      :root {
        --primary: #ff4d6d;
        --dark-red: #800f2f;
        --bg-dark: #0f172a;
        --gold: #ffd700;
        --text-light: #fff0f3;
        --glass: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background-color: var(--bg-dark);
        color: var(--text-light);
        overflow: hidden;
        width: 100vw;
        height: 100vh;
      }

      h1,
      h2,
      h3 {
        font-family: "Playfair Display", serif;
      }

      .script-font {
        font-family: "Great Vibes", cursive;
      }

      #main-container {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        opacity: 0;
        visibility: hidden;
        z-index: 1;
        overflow: hidden;
      }

      .slide.active {
        opacity: 1;
        visibility: visible;
        z-index: 2;
      }

      .nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        border: 1px solid var(--glass-border);
        color: white;
        padding: 15px 20px;
        border-radius: 50%;
        cursor: pointer;
        z-index: 100;
        transition: all 0.3s ease;
        font-size: 1.2rem;
      }

      .nav-btn:hover {
        background: var(--primary);
        box-shadow: 0 0 15px var(--primary);
      }

      #prev-btn {
        left: 20px;
      }

      #next-btn {
        right: 20px;
      }

      .hidden {
        display: none !important;
      }

      .music-control {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid var(--primary);
        color: var(--primary);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 77, 109, 0.4);
        }

        70% {
          box-shadow: 0 0 0 10px rgba(255, 77, 109, 0);
        }

        100% {
          box-shadow: 0 0 0 0 rgba(255, 77, 109, 0);
        }
      }

      /* --- SLIDE 1 --- */
      #slide-1 {
        background: radial-gradient(circle at center, #590d22, #2b0612);
      }

      .floating-hearts {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .heart-particle {
        position: absolute;
        color: rgba(255, 77, 109, 0.6);
        font-size: 20px;
        animation: floatUp linear infinite;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(110vh) scale(0.5);
          opacity: 0;
        }

        50% {
          opacity: 1;
        }

        100% {
          transform: translateY(-10vh) scale(1.2);
          opacity: 0;
        }
      }

      .intro-content {
        text-align: center;
        z-index: 5;
        padding: 20px;
        width: min(90%, 800px);
      }

      .typewriter-text {
        font-size: 1.5rem;
        min-height: 60px;
        color: #ffccd5;
        margin-bottom: 20px;
        font-weight: 300;
      }

      .main-title {
        font-size: 4rem;
        color: var(--primary);
        text-shadow: 0 0 20px rgba(255, 77, 109, 0.5);
        opacity: 0;
      }

      /* --- SLIDE 2 --- */
      #slide-2 {
        background: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%);
        position: relative;
      }

      .bg-pattern {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.05;
        font-family: "Poppins", sans-serif;
        font-weight: 900;
        font-size: 4rem;
        color: white;
        pointer-events: none;
      }

      .memories-container {
        z-index: 2;
        width: min(95%, 1200px);
        text-align: center;
      }

      .memories-title {
        font-size: 3.5rem;
        color: #fff;
        margin-bottom: 30px;
      }

      .gallery {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .memory-card {
        position: relative;
        width: 250px;
        height: 350px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        background: #fff;
        opacity: 0;
        transform: translateY(100px);
      }

      .memory-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .img-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #eee;
      }

      .p1 {
        background: url("https://images.unsplash.com/photo-1714396231064-d26d5f026378?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fGJldXRpZnVsJTIwZ2lybHxlbnwwfHwwfHx8MA%3D%3D")
          center/cover;
      }

      .p2 {
        background: url("https://images.unsplash.com/photo-1722110650047-27d3d4a922b4?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjZ8fGJldXRpZnVsJTIwZ2lybHxlbnwwfHwwfHx8MA%3D%3D")
          center/cover;
      }

      .p3 {
        background: url("https://images.unsplash.com/photo-1653857726990-342f87e9998a?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NDB8fGJldXRpZnVsJTIwZ2lybHxlbnwwfHwwfHx8MA%3D%3D")
          center/cover;
      }

      .memory-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(128, 15, 47, 0.85);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
        padding: 20px;
      }

      .memory-card:hover .memory-overlay {
        opacity: 1;
      }

      .quote-text {
        font-family: "Great Vibes", cursive;
        font-size: 1.8rem;
        line-height: 1.4;
        text-align: center;
      }

      /* --- SLIDE 3: GIFT (FIXED) --- */
      #slide-3 {
        background: radial-gradient(ellipse at center, #1a1a1a, #000);
      }

      .gift-wrapper {
        position: relative;
        width: 100%;
        height: 66%;
        max-width: 600px;
        max-height: 600px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .main-gift-box {
        position: relative;
        width: 140px;
        height: 140px;
        z-index: 20;
      }

      .box-lid {
        position: absolute;
        top: 0;
        left: -10px;
        width: 160px;
        height: 35px;
        background: var(--primary);
        border-radius: 5px;
        z-index: 21;
        display: flex;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .box-ribbon-top {
        width: 30px;
        height: 100%;
        background: var(--gold);
      }

      .box-body {
        position: absolute;
        bottom: 0;
        width: 140px;
        height: 110px;
        background: var(--dark-red);
        border-radius: 0 0 5px 5px;
        display: flex;
        justify-content: center;
      }

      .box-ribbon-body {
        width: 30px;
        height: 100%;
        background: var(--gold);
      }

      .gift-btn {
        margin-top: 40px;
        padding: 12px 35px;
        font-size: 1.1rem;
        background: var(--gold);
        color: var(--dark-red);
        border: none;
        border-radius: 30px;
        cursor: pointer;
        font-weight: bold;
        z-index: 30;
        transition: transform 0.2s ease;
      }

      .gift-btn:active {
        transform: scale(0.9);
      }

      .png-gift {
        position: absolute;
        width: 110px;
        height: 110px;
        object-fit: contain;
        opacity: 0;
        z-index: 10;
        filter: drop-shadow(0 10px 15px rgba(255, 77, 109, 0.4));
        pointer-events: none;
      }

      @media (max-width: 768px) {
        .main-gift-box {
          width: 100px;
          height: 100px;
        }

        .box-lid {
          width: 120px;
          height: 30px;
          left: -10px;
        }

        .box-body {
          width: 100px;
          height: 80px;
        }

        .png-gift {
          width: 80px;
          height: 80px;
        }
      }

      /* --- SLIDE 4 --- */
      #slide-4 {
        background: linear-gradient(
          to bottom,
          #020024 0%,
          #090979 35%,
          #00d4ff 100%
        );
      }

      .moon {
        position: absolute;
        top: 10%;
        right: 15%;
        width: 80px;
        height: 80px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 40px #fff;
        z-index: 1;
      }

      .heart-wrapper {
        position: relative;
        width: 250px;
        height: 250px;
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .main-heart-svg {
        width: 100%;
        height: 100%;
        overflow: visible;
        z-index: 10;
      }

      .heart-path {
        fill: rgba(255, 77, 109, 0);
        stroke: var(--primary);
        stroke-width: 5;
        filter: drop-shadow(0 0 15px rgba(255, 77, 109, 0.8));
      }

      .heart-text {
        fill: #fff;
        font-family: "Great Vibes", cursive;
        font-size: 18px;
        text-anchor: middle;
        dominant-baseline: central;
        opacity: 0;
      }

      .side-element {
        position: absolute;
        font-size: 2.5rem;
        color: var(--primary);
        opacity: 0;
        z-index: 5;
      }

      .side-left {
        left: -10px;
        bottom: 20%;
      }

      .side-right {
        right: -10px;
        bottom: 20%;
      }

      .promise-content {
        z-index: 5;
        text-align: center;
        width: min(90%, 800px);
        display: contents;
      }

      .promise-text {
        font-family: "Playfair Display", serif;
        font-size: 2.5rem;
        color: white;
        opacity: 0;
        transform: translateY(30px);
        margin-top: 15px;
      }

      /* --- SLIDE 5 --- */
      #slide-5 {
        background: url("https://images.unsplash.com/photo-1532767153582-b1a0e5145009?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80")
          center/cover no-repeat;
      }

      .slide-5-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
      }

      .glass-box {
        position: relative;
        z-index: 5;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 40px;
        border-radius: 20px;
        width: min(90%, 600px);
        text-align: center;
      }

      .final-msg {
        font-size: 1.5rem;
        line-height: 1.6;
        margin-bottom: 30px;
        color: #eee;
      }

      .love-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: 1.2rem;
        border-radius: 50px;
        cursor: pointer;
      }

      .final-signature {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: "Great Vibes", cursive;
        font-size: 5rem;
        color: var(--primary);
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        width: 100%;
        text-align: center;
        opacity: 0;
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <audio id="bg-music" loop>
      <source
        src="vikram_song/3-Moonu-128kbps-MassTamilan.mp3"
        type="audio/mp3"
      />
    </audio>
    <div class="music-control" id="music-btn"><i class="fas fa-music"></i></div>

    <button class="nav-btn hidden" id="prev-btn">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button class="nav-btn" id="next-btn">
      <i class="fas fa-chevron-right"></i>
    </button>

    <div id="main-container">
      <!-- SLIDE 1 -->
      <div class="slide active" id="slide-1">
        <div class="floating-hearts" id="hearts-container"></div>
        <div class="intro-content">
          <div class="typewriter-text" id="typewriter"></div>
          <h1 class="main-title script-font">
            Happy Valentine‚Äôs Day<br />My Love
          </h1>
        </div>
      </div>

      <!-- SLIDE 2 -->
      <div class="slide" id="slide-2">
        <div class="bg-pattern" id="bg-text-pattern"></div>
        <div class="memories-container">
          <h2 class="memories-title">My Love</h2>
          <div class="gallery">
            <div class="memory-card">
              <img src="img/a1.jpeg" class="memory-img" />
              <div class="memory-overlay">
                <p class="quote-text">"You are my favorite adventure."</p>
              </div>
            </div>

            <div class="memory-card">
              <img src="img/a2.jpeg" class="memory-img" />
              <div class="memory-overlay">
                <p class="quote-text">"In your smile, I see beauty."</p>
              </div>
            </div>

            <div class="memory-card">
              <img src="img/a3.jpeg" class="memory-img" />
              <div class="memory-overlay">
                <p class="quote-text">"I choose you over and over."</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- SLIDE 3 (GIFT SLIDE FIXED) -->
      <div class="slide" id="slide-3">
        <div class="gift-wrapper">
          <!-- PNG Gift Images -->
          <img
            src="img/chocklet.png"
            class="png-gift"
            id="gift-tl"
            alt="Gift"
          />
          <img
            src="img/diamond ring box.png"
            class="png-gift"
            id="gift-tr"
            alt="Gift"
          />
          <img
            src="img/pink color teddy.png"
            class="png-gift"
            id="gift-bl"
            alt="Gift"
          />
          <img
            src="img/red rose bouquet tied.png"
            class="png-gift"
            id="gift-br"
            alt="Gift"
          />

          <div class="main-gift-box" id="gift-box">
            <div class="box-lid">
              <div class="box-ribbon-top"></div>
            </div>
            <div class="box-body">
              <div class="box-ribbon-body"></div>
            </div>
          </div>
        </div>
        <button class="gift-btn" id="open-gift-btn">Open Gift</button>
      </div>

      <!-- SLIDE 4 -->
      <div class="slide" id="slide-4">
        <div class="sky-container">
          <div class="moon"></div>
        </div>
        <div class="promise-content">
          <div class="heart-wrapper">
            <svg class="main-heart-svg" viewBox="0 0 200 200">
              <path
                class="heart-path"
                d="M100 175 C 20 115, 20 50, 70 30 A 35 35 0 0 1 100 65 A 35 35 0 0 1 130 30 C 180 50, 180 115, 100 175 Z"
              />
              <text x="100" y="103" class="heart-text">Love</text>
            </svg>
            <div class="side-element side-left">‚ù§Ô∏è</div>
            <div class="side-element side-right">‚ù§Ô∏è</div>
          </div>
          <h2 class="promise-text">
            ‡Æâ‡Æ≤‡Æï‡ÆÆ‡Øç ‡Æ®‡ÆÆ‡Øç‡ÆÆ‡Øà ‡Æ§‡ØÇ‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æï‡Øç‡Æï‡Æ≤‡Ææ‡ÆÆ‡Øç; ‡ÆÜ‡Æ©‡Ææ‡Æ≤‡Øç ‡Æ®‡ÆÆ‡Øç
            ‡Æá‡Æ∞‡ØÅ‡Æµ‡Æ∞‡Æø‡Æ©‡Øç ‡Æµ‡Ææ‡Æ¥‡Øç‡Æµ‡ØÅ‡ÆÆ‡Øç,‡Æá‡Æ§‡ÆØ‡ÆÆ‡ØÅ‡ÆÆ‡Øç ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ≥‡Øç ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ ‡Æï‡Æ≤‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ, ‡Æ®‡ÆÆ‡Æï‡Øç‡Æï‡Ææ‡Æï‡Æµ‡Øá
            ‡Æ§‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ®‡Øç‡Æ§ ‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà ‡Æ®‡ÆÆ‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Øç‡Æ§‡Ææ‡Æ©‡Øç ‡Æ§‡ØÜ‡Æ∞‡Æø‡ÆØ‡ØÅ‡ÆÆ‡Øç‚Ä¶<br />i love you
            always keerthu maa...üíïü´Ç
          </h2>
        </div>
      </div>

      <!-- SLIDE 5 -->
      <div class="slide" id="slide-5">
        <div class="slide-5-overlay"></div>
        <div class="glass-box" id="final-box">
          <p class="final-msg">
            ‚Äú‡Æ®‡Ææ‡ÆÆ‡Øç ‡Æé‡Æµ‡Øç‡Æµ‡Æ≥‡Æµ‡ØÅ ‡Æ§‡ØÇ‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡ØÅ‡ÆÆ‡Øç, ‚Ä¶<br />
            ‡Æ®‡Ææ‡Æ©‡Øç ‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ©‡Øç ‡ÆÖ‡Æ∞‡ØÅ‡Æï‡Æø‡Æ≤‡Øç‡Æ§‡Ææ‡Æ©‡Øç ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç...‚ù§Ô∏è‚Äçü©πü´Ç<br />VIKRAMüíùKEERTHANA
          </p>
          <button class="love-btn" id="final-btn">
            I LOVE YOU YOU AS ALWAYS
          </button>
        </div>
        <div class="final-signature" id="signature">
          i love you as always keerthu maa...üíïü´Çü•∞
        </div>
      </div>
    </div>

    <script>
      gsap.registerPlugin(TextPlugin);

      let currentSlide = 0;
      const slides = document.querySelectorAll(".slide");
      const totalSlides = slides.length;
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const audio = document.getElementById("bg-music");
      const musicBtn = document.getElementById("music-btn");
      let isPlaying = false;

      musicBtn.addEventListener("click", () => {
        if (isPlaying) {
          audio.pause();
          musicBtn.innerHTML = '<i class="fas fa-music"></i>';
          musicBtn.style.animation = "none";
        } else {
          audio.play().catch((e) => {});
          musicBtn.innerHTML = '<i class="fas fa-pause"></i>';
          musicBtn.style.animation = "pulse 2s infinite";
        }
        isPlaying = !isPlaying;
      });

      document.body.addEventListener(
        "click",
        () => {
          if (!isPlaying) {
            audio
              .play()
              .then(() => {
                isPlaying = true;
                musicBtn.innerHTML = '<i class="fas fa-pause"></i>';
              })
              .catch(() => {});
          }
        },
        { once: true },
      );

      function updateButtons() {
        if (currentSlide === 0) prevBtn.classList.add("hidden");
        else prevBtn.classList.remove("hidden");
        if (currentSlide === 2 || currentSlide === totalSlides - 1)
          nextBtn.classList.add("hidden");
        else nextBtn.classList.remove("hidden");
      }

      function changeSlide(direction) {
        const outgoing = slides[currentSlide];
        const nextIndex = currentSlide + direction;
        if (nextIndex < 0 || nextIndex >= totalSlides) return;
        const incoming = slides[nextIndex];

        const tl = gsap.timeline();
        tl.to(outgoing, {
          opacity: 0,
          duration: 0.8,
          onComplete: () => {
            outgoing.classList.remove("active");
            incoming.classList.add("active");
          },
        }).fromTo(
          incoming,
          { opacity: 0, scale: 1.1 },
          {
            opacity: 1,
            scale: 1,
            duration: 0.8,
            onComplete: () => {
              currentSlide = nextIndex;
              updateButtons();
              triggerSlideAnimations(currentSlide);
            },
          },
        );
      }

      nextBtn.addEventListener("click", () => changeSlide(1));
      prevBtn.addEventListener("click", () => changeSlide(-1));

      function triggerSlideAnimations(index) {
        if (index === 1) {
          gsap.to(".memory-card", {
            y: 0,
            opacity: 1,
            duration: 1,
            stagger: 0.2,
            ease: "power2.out",
          });
        }
        if (index === 3) {
          const heartPath = document.querySelector(".heart-path");
          const length = heartPath.getTotalLength();
          gsap.set(heartPath, {
            strokeDasharray: length,
            strokeDashoffset: length,
            opacity: 1,
          });
          gsap.set(".heart-text, .side-element", { opacity: 0, scale: 0 });
          gsap.set(".promise-text", { opacity: 0, y: 30 });
          const tl = gsap.timeline();
          tl.to(heartPath, {
            strokeDashoffset: 0,
            duration: 2,
            ease: "power2.inOut",
          })
            .to(
              heartPath,
              { fill: "rgba(255, 77, 109, 0.2)", duration: 0.8 },
              "-=0.5",
            )
            .to(
              ".heart-text",
              { opacity: 1, scale: 1, duration: 1, ease: "back.out(1.7)" },
              "-=0.5",
            )
            .to(
              ".side-element",
              {
                opacity: 1,
                scale: 1,
                duration: 0.8,
                stagger: 0.2,
                ease: "elastic.out(1, 0.3)",
              },
              "-=0.8",
            )
            .to(
              ".promise-text",
              { opacity: 1, y: 0, duration: 1, ease: "power2.out" },
              "-=0.5",
            );
        }
      }

      // Slide 3: Gift Logic (FIXED)
      const openBtn = document.getElementById("open-gift-btn");
      openBtn.addEventListener("click", () => {
        const tl = gsap.timeline();
        const isMobile = window.innerWidth <= 768;
        const distance = isMobile ? 130 : 200; // Controlled spacing

        tl.to("#gift-box", {
          rotation: 5,
          duration: 0.1,
          yoyo: true,
          repeat: 5,
        })
          .to(".box-lid", {
            y: -80,
            rotation: -25,
            opacity: 0,
            duration: 0.6,
            ease: "power2.out",
          })
          .to(
            openBtn,
            { opacity: 0, pointerEvents: "none", duration: 0.2 },
            "<",
          )

          // Animate images out to corners with safe spacing
          .to(
            "#gift-tl",
            {
              opacity: 1,
              x: -distance,
              y: -distance,
              rotation: -10,
              duration: 1,
              ease: "back.out(1.5)",
            },
            "-=0.3",
          )
          .to(
            "#gift-tr",
            {
              opacity: 1,
              x: distance,
              y: -distance,
              rotation: 10,
              duration: 1,
              ease: "back.out(1.5)",
            },
            "<0.1",
          )
          .to(
            "#gift-bl",
            {
              opacity: 1,
              x: -distance,
              y: distance,
              rotation: -10,
              duration: 1,
              ease: "back.out(1.5)",
            },
            "<0.1",
          )
          .to(
            "#gift-br",
            {
              opacity: 1,
              x: distance,
              y: distance,
              rotation: 10,
              duration: 1,
              ease: "back.out(1.5)",
            },
            "<0.1",
          )

          .call(() => {
            nextBtn.classList.remove("hidden");
            gsap.from(nextBtn, { scale: 0, duration: 0.5 });
          });
      });

      function generateHearts() {
        const container = document.getElementById("hearts-container");
        for (let i = 0; i < 30; i++) {
          const el = document.createElement("div");
          el.classList.add("heart-particle");
          el.innerText = "‚ù§Ô∏è";
          el.style.left = Math.random() * 100 + "vw";
          el.style.animationDuration = Math.random() * 3 + 4 + "s";
          el.style.animationDelay = Math.random() * 5 + "s";
          container.appendChild(el);
        }
      }

      function typeWriterEffect() {
        gsap.to("#typewriter", {
          text: "Even when miles apart‚Ä¶ my heart is always with you ‚ù§Ô∏è",
          duration: 4,
          delay: 1,
        });
        gsap.to(".main-title", {
          opacity: 1,
          scale: 1.1,
          duration: 2,
          delay: 4.5,
          ease: "elastic.out(1, 0.3)",
        });
      }

      function generateBgText() {
        const container = document.getElementById("bg-text-pattern");
        container.innerHTML = "LOVE U ".repeat(100);
      }

      document.getElementById("final-btn").addEventListener("click", () => {
        gsap.to("#final-box", {
          opacity: 0,
          scale: 0.8,
          filter: "blur(10px)",
          duration: 1,
        });
        gsap.to("#signature", {
          opacity: 1,
          scale: 1,
          duration: 1.5,
          ease: "power2.out",
        });
      });

      function createStars() {
        const containers = [
          document.querySelector("#slide-4 .sky-container"),
          document.querySelector("#slide-5 .slide-5-overlay"),
        ];
        containers.forEach((c) => {
          for (let i = 0; i < 50; i++) {
            let star = document.createElement("div");
            star.style.cssText = `position:absolute;left:${Math.random() * 100}%;top:${Math.random() * 100}%;width:2px;height:2px;background:white;border-radius:50%;opacity:${Math.random()};`;
            c.appendChild(star);
          }
        });
      }

      createStars();
      generateHearts();
      generateBgText();
      typeWriterEffect();
      updateButtons();
    </script>
  </body>
</html>

